{% extends 'base.html' %}
{% block styles %}
<style>
    .table-wrapper {
        overflow-x: auto;
        width: 100%;
        margin: 20px 0;
        background: white;
        border-radius: 4px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .table-container {
        padding: 30px;
    }

    .data-table {
        table-layout: auto;
        width: max-content;
        min-width: calc(100% - 40px);
        border-collapse: collapse;
    }

    .data-table th,
    .data-table td {
        height: 40px;
        max-width: 200px;
        overflow: hidden;
        text-overflow: ellipsis;
        padding: 8px 16px;
        white-space: nowrap;
        border: 1px solid #ddd;
        background: white;
    }

    .image-row td {
        width: 200px !important;
        height: 300px !important;
        background: #f8f9fa;
    }
</style>
{% endblock %}

{% block menu %}
<a class="header item" href="/datasets/">Главная</a>
<a class="header active item">{{ dataset_info.dataset_name }}</a>
<a class="header right item" href="#">Импорт/Экспорт</a>
{% endblock %}

{% block content %}
<div class="ui container padded-container">
    <h1 class="ui header">{{ dataset_info.dataset_name }}</h1>
    <div class="ui two column grid">
        <div class="column">
            <div class="ui segment">
                <div class="ui header">Описание</div>
                {% if dataset_info.dataset_description != '' %}
                <p>{{ dataset_info.dataset_description }}</p>
                {% else %}
                <p>(Без описания)</p>
                {% endif %}
            </div>
        </div>
        <div class="column">
            <div class="ui segment">
                <div class="ui header">Характеристики</div>
                <ul>
                    <li>Размер файла: {{ dataset_info.dataset_size }} кбайт</li>
                    <li>Количество столбцов: {{ dataset_info.dataset_columns }}</li>
                    <li>Количество записей: {{ dataset_info.dataset_rows }}</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="ui container padded-container">
        <a class="ui secondary button" href="#">Скачать</a>
        <a class="ui basic secondary button" href="/datasets/edit/{{ dataset_info.dataset_id }}/">Редактировать</a>
        <a class="ui negative button" href="#">Удалить</a>
        <a class="ui right floated button" href="/datasets/">Назад</a>
    </div>

    <div class="ui divider"></div>
</div>

<div class="table-wrapper">
    <div class="table-container">
        <table class="data-table">
            {% if dataset_info.dataset_columns > max_cols_num %}
            <h3>{{ 'В датасете слишком много столбцов (' ~ dataset_info.dataset_columns ~ '). В таблице отобразятся первые ' ~ max_cols_num}}</h3>
            {% endif %}
            <thead>
                <tr>
                    {% for header in headers %}
                    <th>{{ header }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                <tr class="image-row">
                    {% for header in headers %}
                    <td></td>
                    {% endfor %}
                </tr>

                {% for row in rows %}
                <tr>
                    {% for cell in row %}
                    <td>{{ cell }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}